import"./header-Bhw5Jc_z.js";/* empty css                   */import{s as c}from"./notifications-Cp4frmnl.js";document.addEventListener("DOMContentLoaded",()=>{const I=document.getElementById("save-continue"),P=document.getElementById("review-order"),h=document.getElementById("submit-payment"),y=document.getElementById("same-billing-checkbox"),b=document.getElementById("country"),g=document.getElementById("state-group"),B=document.getElementById("state"),p=document.getElementById("summary-items"),M=document.getElementById("summary-subtotal"),T=document.getElementById("summary-discount"),V=document.getElementById("summary-tax"),F=document.getElementById("summary-total"),q=document.getElementById("delivery-estimate"),A=document.getElementById("delivery-address"),_=document.getElementById("delivery-date"),O=document.getElementById("payment-method");let m=JSON.parse(localStorage.getItem("cart"))||[],C=(localStorage.getItem("promoCode")||"")==="FLY10"?.1:0,n=JSON.parse(localStorage.getItem("checkoutFormData"))||{};const W=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],x=()=>{B.innerHTML='<option value="">Select State</option>',W.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,B.appendChild(t)})},H=()=>{n.email&&(document.getElementById("email").value=n.email),n.firstName&&(document.getElementById("first-name").value=n.firstName),n.lastName&&(document.getElementById("last-name").value=n.lastName),n.country&&(document.getElementById("country").value=n.country,n.country==="US"&&(g.style.display="block",n.state&&(document.getElementById("state").value=n.state))),n.city&&(document.getElementById("city").value=n.city),n.postalCode&&(document.getElementById("postal-code").value=n.postalCode),n.street&&(document.getElementById("street").value=n.street),n.phone&&(document.getElementById("phone").value=n.phone)},S=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),k=e=>/^[\d\s\-()+]{10,}$/.test(e),$=e=>/^\d{16}$/.test(e.replace(/\s/g,"")),L=e=>/^(0[1-9]|1[0-2])\/?([0-9]{2})$/.test(e),w=e=>/^\d{3,4}$/.test(e),U=e=>e.trim().length>0,J=e=>e.trim().length>0,G=e=>e.trim().length>0,v=e=>e.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim(),E=e=>e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").substring(0,5);document.getElementById("card-number").addEventListener("input",e=>{e.target.value=v(e.target.value)}),document.getElementById("card-expiry").addEventListener("input",e=>{e.target.value=E(e.target.value)}),document.getElementById("card-number").addEventListener("input",e=>{const t=e.target.value.replace(/\s/g,"");if(t.length>16){e.target.value=v(t.slice(0,16));return}e.target.value=v(t)}),document.getElementById("card-expiry").addEventListener("input",e=>{const t=e.target.value.replace(/\D/g,"");if(t.length>4){e.target.value=E(t.slice(0,4));return}e.target.value=E(t)}),document.getElementById("card-cvv").addEventListener("input",e=>{const t=e.target.value.replace(/\D/g,"");t.length>4&&(e.target.value=t.slice(0,4))});const d=(e,t)=>{const s=document.getElementById(e);s.addEventListener("blur",()=>{const o=t(s.value.trim());a(e,o)})};d("card-number",$),d("card-expiry",L),d("card-cvv",w),d("email",S),d("phone",k),d("billing-street",U),d("billing-city",J),d("billing-postal",G);const N=()=>{const e=new Date,t=new Date(e);return t.setDate(e.getDate()+7),t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})},Y=()=>{const e=m.reduce((r,i)=>r+i.quantity,0),t=m.reduce((r,i)=>{const u=i.quantity>3?.1:0;return r+i.price*i.quantity*(1-u)},0),s=t*C,o=(t-s)*.07,l=t-s+o;document.getElementById("mobile-cart-count").textContent=`${e} ${e===1?"item":"items"}`,document.getElementById("mobile-cart-total").textContent=`$${l.toFixed(2)}`},f=document.querySelector(".summary-header__toggle"),K=document.getElementById("summary-content");f.addEventListener("click",()=>{const e=f.getAttribute("aria-expanded")==="true";f.setAttribute("aria-expanded",!e),K.setAttribute("aria-hidden",e)});const R=()=>{if(p.innerHTML="",m.length===0){p.innerHTML="<p>Your cart is empty</p>";return}m.forEach(l=>{const r=l.quantity>3?.1:0;l.price*(1-r);const i=document.createElement("div");i.className="summary-item",i.innerHTML=`
        <img src="${l.image}" alt="${l.name}" class="summary-item__image">
        <div class="summary-item__info">
          <h3 class="summary-item__title">${l.name}</h3>
          <span class="summary-item__quantity">Quantity: ${l.quantity}</span>
        </div>
      `,i.addEventListener("click",()=>{window.location.href=`./product/${l.name.replace(/^the\s+/i,"").toLowerCase().replace(/\s+/g,"-")}.html`}),p.appendChild(i)});const e=m.reduce((l,r)=>{const i=r.quantity>3?.1:0;return l+r.price*r.quantity*(1-i)},0),t=e*C,s=(e-t)*.07,o=e-t+s;M.textContent=`$${e.toFixed(2)}`,T.textContent=`-$${t.toFixed(2)}`,V.textContent=`$${s.toFixed(2)}`,F.textContent=`$${o.toFixed(2)}`,q.textContent=`Estimated delivery: ${N()}`,Y()};b.addEventListener("change",()=>{b.value==="US"?(g.style.display="block",x()):g.style.display="none"}),y.addEventListener("change",()=>{const e=document.getElementById("billing-address");e.style.display=y.checked?"none":"block"});const a=(e,t)=>{const o=document.getElementById(e).closest(".form-group");t?o.classList.remove("has-error"):o.classList.add("has-error")};I.addEventListener("click",()=>{const e=document.getElementById("email").value.trim(),t=document.getElementById("first-name").value.trim(),s=document.getElementById("last-name").value.trim(),o=document.getElementById("country").value,l=o==="US"?document.getElementById("state").value:"",r=document.getElementById("city").value.trim(),i=document.getElementById("postal-code").value.trim(),u=document.getElementById("street").value.trim(),D=document.getElementById("phone").value.trim();if(S(e))a("email",!0);else{a("email",!1),c("Please enter a valid email");return}if(t)a("first-name",!0);else{a("first-name",!1),c("Please enter your first name");return}if(s)a("last-name",!0);else{a("last-name",!1),c("Please enter your last name");return}if(o)a("country",!0);else{a("country",!1),c("Please select your country");return}if(o==="US"&&!l){a("state",!1),c("Please select your state");return}else a("state",!0);if(r)a("city",!0);else{a("city",!1),c("Please enter your city");return}if(i)a("postal-code",!0);else{a("postal-code",!1),c("Please enter your postal code");return}if(u)a("street",!0);else{a("street",!1),c("Please enter your street address");return}if(k(D))a("phone",!0);else{a("phone",!1),c("Please enter a valid phone number");return}n={email:e,firstName:t,lastName:s,country:o,state:l,city:r,postalCode:i,street:u,phone:D},localStorage.setItem("checkoutFormData",JSON.stringify(n)),document.getElementById("payment-group").style.display="block",I.style.display="none",window.scrollTo({top:document.getElementById("payment-group").offsetTop-20,behavior:"smooth"})}),P.addEventListener("click",()=>{const e=document.getElementById("card-number").value.trim(),t=document.getElementById("card-expiry").value.trim(),s=document.getElementById("card-cvv").value.trim();if($(e))a("card-number",!0);else{a("card-number",!1),c("Please enter a valid card number");return}if(L(t))a("card-expiry",!0);else{a("card-expiry",!1),c("Please enter a valid expiry date");return}if(w(s))a("card-cvv",!0);else{a("card-cvv",!1),c("Please enter a valid CVV");return}if(!y.checked){const o=document.getElementById("billing-street").value.trim(),l=document.getElementById("billing-city").value.trim(),r=document.getElementById("billing-postal").value.trim();if(o)a("billing-street",!0);else{a("billing-street",!1),c("Please enter your billing street");return}if(l)a("billing-city",!0);else{a("billing-city",!1),c("Please enter your billing city");return}if(r)a("billing-postal",!0);else{a("billing-postal",!1),c("Please enter your billing postal code");return}n.billingStreet=o,n.billingCity=l,n.billingPostal=r}n.cardLastFour=e.slice(-4),n.cardType=e.startsWith("4")?"Visa":e.startsWith("5")?"Mastercard":e.startsWith("3")?"American Express":"Card",localStorage.setItem("checkoutFormData",JSON.stringify(n)),document.getElementById("review-group").style.display="block",document.getElementById("payment-group").style.display="none",O.textContent=`${n.cardType} ending in ${n.cardLastFour}`,A.textContent=`${n.street}, ${n.city}, ${n.state||""} ${n.postalCode}, ${n.country}`,_.textContent=N(),window.scrollTo({top:document.getElementById("review-group").offsetTop-20,behavior:"smooth"})}),h.addEventListener("click",()=>{const e=document.getElementById("payment-modal"),t=e.querySelector(".payment-status"),s=e.querySelector(".payment-success"),o=e.querySelector(".modal__close");t.style.display="block",s.style.display="none",o.style.display="none",e.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",setTimeout(()=>{t.style.display="none",s.style.display="flex",o.style.display="block";const l=()=>{e.setAttribute("aria-hidden","true"),document.body.style.overflow="",h.focus(),o.removeEventListener("click",l),e.removeEventListener("click",r)},r=i=>{i.target===e&&l()};o.addEventListener("click",l),e.addEventListener("click",r)},3e3)}),x(),H(),R()});
