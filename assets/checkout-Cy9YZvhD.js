import"./header-BNmznXph.js";/* empty css                   */import{s as i}from"./notifications-Cp4frmnl.js";document.addEventListener("DOMContentLoaded",()=>{const v=document.getElementById("save-continue"),x=document.getElementById("review-order"),f=document.getElementById("submit-payment"),u=document.getElementById("same-billing-checkbox"),E=document.getElementById("country"),y=document.getElementById("state-group"),I=document.getElementById("state"),g=document.getElementById("summary-items"),S=document.getElementById("summary-subtotal"),k=document.getElementById("summary-discount"),$=document.getElementById("summary-tax"),L=document.getElementById("summary-total"),w=document.getElementById("delivery-estimate"),N=document.getElementById("delivery-address"),P=document.getElementById("delivery-date"),D=document.getElementById("payment-method");let d=JSON.parse(localStorage.getItem("cart"))||[],h=(localStorage.getItem("promoCode")||"")==="FLY10"?.1:0,t=JSON.parse(localStorage.getItem("checkoutFormData"))||{};const M=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],b=()=>{I.innerHTML='<option value="">Select State</option>',M.forEach(e=>{const a=document.createElement("option");a.value=e,a.textContent=e,I.appendChild(a)})},T=()=>{t.email&&(document.getElementById("email").value=t.email),t.firstName&&(document.getElementById("first-name").value=t.firstName),t.lastName&&(document.getElementById("last-name").value=t.lastName),t.country&&(document.getElementById("country").value=t.country,t.country==="US"&&(y.style.display="block",t.state&&(document.getElementById("state").value=t.state))),t.city&&(document.getElementById("city").value=t.city),t.postalCode&&(document.getElementById("postal-code").value=t.postalCode),t.street&&(document.getElementById("street").value=t.street),t.phone&&(document.getElementById("phone").value=t.phone)},F=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),q=e=>/^[\d\s\-()+]{10,}$/.test(e),A=e=>/^\d{16}$/.test(e.replace(/\s/g,"")),_=e=>/^(0[1-9]|1[0-2])\/?([0-9]{2})$/.test(e),O=e=>/^\d{3,4}$/.test(e),B=()=>{const e=new Date,a=new Date(e);return a.setDate(e.getDate()+7),a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})},V=()=>{const e=d.reduce((l,r)=>l+r.quantity,0),a=d.reduce((l,r)=>{const m=r.quantity>3?.1:0;return l+r.price*r.quantity*(1-m)},0),c=a*h,s=(a-c)*.07,o=a-c+s;document.getElementById("mobile-cart-count").textContent=`${e} ${e===1?"item":"items"}`,document.getElementById("mobile-cart-total").textContent=`$${o.toFixed(2)}`},p=document.querySelector(".summary-header__toggle"),W=document.getElementById("summary-content");p.addEventListener("click",()=>{const e=p.getAttribute("aria-expanded")==="true";p.setAttribute("aria-expanded",!e),W.setAttribute("aria-hidden",e)});const H=()=>{if(g.innerHTML="",d.length===0){g.innerHTML="<p>Your cart is empty</p>";return}d.forEach(o=>{const l=o.quantity>3?.1:0;o.price*(1-l);const r=document.createElement("div");r.className="summary-item",r.innerHTML=`
        <img src="${o.image}" alt="${o.name}" class="summary-item__image">
        <div class="summary-item__info">
          <h3 class="summary-item__title">${o.name}</h3>
          <span class="summary-item__quantity">Quantity: ${o.quantity}</span>
        </div>
      `,r.addEventListener("click",()=>{window.location.href=`./product/${o.name.replace(/^the\s+/i,"").toLowerCase().replace(/\s+/g,"-")}.html`}),g.appendChild(r)});const e=d.reduce((o,l)=>{const r=l.quantity>3?.1:0;return o+l.price*l.quantity*(1-r)},0),a=e*h,c=(e-a)*.07,s=e-a+c;S.textContent=`$${e.toFixed(2)}`,k.textContent=`-$${a.toFixed(2)}`,$.textContent=`$${c.toFixed(2)}`,L.textContent=`$${s.toFixed(2)}`,w.textContent=`Estimated delivery: ${B()}`,V()};E.addEventListener("change",()=>{E.value==="US"?(y.style.display="block",b()):y.style.display="none"}),u.addEventListener("change",()=>{const e=document.getElementById("billing-address");e.style.display=u.checked?"none":"block"});const n=(e,a)=>{const s=document.getElementById(e).closest(".form-group");a?s.classList.remove("has-error"):s.classList.add("has-error")};v.addEventListener("click",()=>{const e=document.getElementById("email").value.trim(),a=document.getElementById("first-name").value.trim(),c=document.getElementById("last-name").value.trim(),s=document.getElementById("country").value,o=s==="US"?document.getElementById("state").value:"",l=document.getElementById("city").value.trim(),r=document.getElementById("postal-code").value.trim(),m=document.getElementById("street").value.trim(),C=document.getElementById("phone").value.trim();if(F(e))n("email",!0);else{n("email",!1),i("Please enter a valid email");return}if(a)n("first-name",!0);else{n("first-name",!1),i("Please enter your first name");return}if(c)n("last-name",!0);else{n("last-name",!1),i("Please enter your last name");return}if(s)n("country",!0);else{n("country",!1),i("Please select your country");return}if(s==="US"&&!o){n("state",!1),i("Please select your state");return}else n("state",!0);if(l)n("city",!0);else{n("city",!1),i("Please enter your city");return}if(r)n("postal-code",!0);else{n("postal-code",!1),i("Please enter your postal code");return}if(m)n("street",!0);else{n("street",!1),i("Please enter your street address");return}if(q(C))n("phone",!0);else{n("phone",!1),i("Please enter a valid phone number");return}t={email:e,firstName:a,lastName:c,country:s,state:o,city:l,postalCode:r,street:m,phone:C},localStorage.setItem("checkoutFormData",JSON.stringify(t)),document.getElementById("payment-group").style.display="block",v.style.display="none",window.scrollTo({top:document.getElementById("payment-group").offsetTop-20,behavior:"smooth"})}),x.addEventListener("click",()=>{const e=document.getElementById("card-number").value.trim(),a=document.getElementById("card-expiry").value.trim(),c=document.getElementById("card-cvv").value.trim();if(A(e))n("card-number",!0);else{n("card-number",!1),i("Please enter a valid card number");return}if(_(a))n("card-expiry",!0);else{n("card-expiry",!1),i("Please enter a valid expiry date");return}if(O(c))n("card-cvv",!0);else{n("card-cvv",!1),i("Please enter a valid CVV");return}if(!u.checked){const s=document.getElementById("billing-street").value.trim(),o=document.getElementById("billing-city").value.trim(),l=document.getElementById("billing-postal").value.trim();if(s)n("billing-street",!0);else{n("billing-street",!1),i("Please enter your billing street");return}if(o)n("billing-city",!0);else{n("billing-city",!1),i("Please enter your billing city");return}if(l)n("billing-postal",!0);else{n("billing-postal",!1),i("Please enter your billing postal code");return}t.billingStreet=s,t.billingCity=o,t.billingPostal=l}t.cardLastFour=e.slice(-4),t.cardType=e.startsWith("4")?"Visa":e.startsWith("5")?"Mastercard":e.startsWith("3")?"American Express":"Card",localStorage.setItem("checkoutFormData",JSON.stringify(t)),document.getElementById("review-group").style.display="block",document.getElementById("payment-group").style.display="none",D.textContent=`${t.cardType} ending in ${t.cardLastFour}`,N.textContent=`${t.street}, ${t.city}, ${t.state||""} ${t.postalCode}, ${t.country}`,P.textContent=B(),window.scrollTo({top:document.getElementById("review-group").offsetTop-20,behavior:"smooth"})}),f.addEventListener("click",()=>{const e=document.getElementById("payment-modal"),a=e.querySelector(".payment-status"),c=e.querySelector(".payment-success"),s=e.querySelector(".modal__close");a.style.display="block",c.style.display="none",s.style.display="none",e.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",setTimeout(()=>{a.style.display="none",c.style.display="flex",s.style.display="block";const o=()=>{e.setAttribute("aria-hidden","true"),document.body.style.overflow="",f.focus(),s.removeEventListener("click",o),e.removeEventListener("click",l)},l=r=>{r.target===e&&o()};s.addEventListener("click",o),e.addEventListener("click",l)},3e3)}),b(),T(),H()});
